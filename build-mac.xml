<?xml version="1.0" encoding="UTF-8"?>
<project name="ButtonDemo" default="make-bundle" basedir=".">

	<property name="esmska-dist-dir" value="${basedir}/dist/"/>
	<property name="app.resources" value="dist/Esmska.app/Contents/Resources/" />

	<taskdef name="bundleapp" classname="com.oracle.appbundler.AppBundlerTask" classpath="lib/appbundler-1.0.jar"/>

	<target name="make-bundle">
		<bundleapp outputdirectory="dist"
				   name="Esmska"
				   displayname="Esmska"
				   identifier="cz.paral.Esmska"
				   mainclassname="esmska.Main"
				   shortversion="1.4.0"
				   icon="${basedir}/resources/icons/esmska.icns">

			<option value="-Dapple.laf.useScreenMenuBar=true"/>
			<option value="-Dfile.encoding=UTF8"/>
			<option value="-Duser.dir=$APP_ROOT/Contents/Resources"/>

			<classpath file="dist/esmska.jar"/>

			<classpath dir="${esmska-dist-dir}/lib">
				<include name="*.jar"/>
			</classpath>
		</bundleapp>

		<!-- create i18n directories in /Contents/Resources -->
		<mkdir dir="${app.resources}/cs.lproj" />
		<mkdir dir="${app.resources}/da.lproj" />
		<mkdir dir="${app.resources}/de.lproj" />
		<mkdir dir="${app.resources}/es.lproj" />
		<mkdir dir="${app.resources}/fr.lproj" />
		<mkdir dir="${app.resources}/he.lproj" />
		<mkdir dir="${app.resources}/hu.lproj" />
		<mkdir dir="${app.resources}/it.lproj" />
		<mkdir dir="${app.resources}/iw.lproj" />
		<mkdir dir="${app.resources}/lt.lproj" />
		<mkdir dir="${app.resources}/lv.lproj" />
		<mkdir dir="${app.resources}/pl.lproj" />
		<mkdir dir="${app.resources}/pt_BR.lproj" />
		<mkdir dir="${app.resources}/ru.lproj" />
		<mkdir dir="${app.resources}/sk.lproj" />
		<mkdir dir="${app.resources}/tr.lproj" />

		<!-- copy gateways and licence to /Contents/Resources -->
		<copy todir="${app.resources}">
			<fileset dir="${esmska-dist-dir}">
				<include name="gateways/**"/>
				<include name="license/**"/>
			</fileset>
		</copy>
	</target>
</project>
